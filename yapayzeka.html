<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Espirili Zeka ðŸ¤–</title>
  <style>
    body {
      background-color: #1e1e1e;
      font-family: Arial, sans-serif;
      color: white;
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    #chat-container {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
    .message {
      max-width: 70%;
      margin: 10px;
      padding: 10px 15px;
      border-radius: 12px;
      line-height: 1.5;
    }
    .user {
      background-color: #0b93f6;
      align-self: flex-end;
      text-align: right;
      margin-left: auto;
    }
    .bot {
      background-color: #2e2e2e;
      align-self: flex-start;
      text-align: left;
      margin-right: auto;
    }
    #input-area {
      display: flex;
      padding: 10px;
      background-color: #2b2b2b;
    }
    #userInput {
      flex: 1;
      padding: 10px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      background-color: #1e1e1e;
      color: white;
    }
    #sendButton {
      padding: 10px 20px;
      margin-left: 10px;
      background-color: #0b93f6;
      border: none;
      border-radius: 5px;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    #sendButton:hover {
      background-color: #0077cc;
    }
  </style>
</head>
<body>

<div id="chat-container">
  <div class="message bot">ðŸ‘‹ Selam! SayÄ±lar, selamlar veya saÃ§ma sorularla gel, ben hep cevabÄ±m ðŸ˜„</div>
</div>

<div id="input-area">
  <input type="text" id="userInput" placeholder="Bir mesaj yaz..." autocomplete="off">
  <button id="sendButton" onclick="sendMessage()">GÃ¶nder</button>
</div>

<script>
  // Orijinal cevap havuzlarÄ±
  const numberTemplates = [
    (n) => `Bence ${n} saat yeterli... ama ${n + 2} saat uyursan rÃ¼yanda roket yaparsÄ±n ðŸš€`,
    (n) => `${n}? Ä°deal ama ${n * 2} yaparsan uzaya Ã§Ä±karsÄ±n ðŸŒŒ`,
    (n) => `MantÄ±klÄ± cevap: ${n}. Ama eÄŸlenceli cevap: ${n + 1} ðŸ˜„`,
    (n) => `Hmm... ${n} olabilir ama ${n - 1} daha fiyakalÄ± duruyor.`,
    (n) => `${n} tamamdÄ±r. Ama bonus istersen ${n + 5}! ðŸ¤‘`,
  ];

  const greetingMessages = [
    "Merhaba! ðŸ¤— NasÄ±lsÄ±n?",
    "Selam! Beni Ã¶zledin mi? ðŸ˜„",
    "Heyyy! HoÅŸ geldin! ðŸ‘‹",
    "Ooo selamlar! HazÄ±r mÄ±sÄ±n zeka fÄ±rtÄ±nasÄ±na? ðŸ§ ðŸŒ©ï¸",
    "Selam! Bu bir yapay zekanÄ±n selamÄ± ðŸ˜Ž"
  ];

  const generalResponses = [
    "Bu sorunun cevabÄ± seni daha da Ã§ok soru sormaya zorlamaz mÄ±? ðŸ¤”",
    "Sen bu cevabÄ± hazÄ±r mÄ±sÄ±n? Belki de cevap sensin. ðŸ˜„",
    "Cevap mÄ± arÄ±yorsun, yoksa sadece konuÅŸmak mÄ± istiyorsun? ðŸ—£ï¸",
    "Peki ya cevap seni deÄŸiÅŸtirecekse? ðŸŒªï¸",
    "Ben sormasam da sen kendine sordun mu bu soruyu? ðŸ¤¨"
  ];

  // KullanÄ±lanlarÄ± takip eden kopyalar
  let usedNumbers = [], usedGreetings = [], usedGenerals = [];

  function getUniqueResponse(pool, used, isFunction = false, arg = null) {
    if (used.length === pool.length) used.length = 0; // hepsi kullanÄ±ldÄ±ysa sÄ±fÄ±rla
    let available = pool.filter((item) => !used.includes(item));
    let selected = available[Math.floor(Math.random() * available.length)];
    used.push(selected);
    return isFunction ? selected(arg) : selected;
  }

  function containsNumber(text) {
    const numberMatch = text.match(/\d+/);
    return numberMatch ? parseInt(numberMatch[0], 10) : null;
  }

  function detectGreeting(text) {
    const lower = text.toLowerCase();
    return ["selam", "merhaba", "naber", "hey", "sa", "slm", "nasÄ±lsÄ±n"].some(kw => lower.includes(kw));
  }

  function sendMessage() {
    const input = document.getElementById("userInput");
    const chat = document.getElementById("chat-container");
    const text = input.value.trim();
    if (!text) return;

    // KullanÄ±cÄ± mesajÄ±
    const userDiv = document.createElement("div");
    userDiv.className = "message user";
    userDiv.textContent = text;
    chat.appendChild(userDiv);

    input.value = "";

    // Bot yazÄ±yor
    const botDiv = document.createElement("div");
    botDiv.className = "message bot";
    botDiv.textContent = "YazÄ±yor...";
    chat.appendChild(botDiv);
    chat.scrollTop = chat.scrollHeight;

    setTimeout(() => {
      const number = containsNumber(text);
      let reply = "";

      if (detectGreeting(text)) {
        reply = getUniqueResponse(greetingMessages, usedGreetings);
      } else if (number !== null) {
        reply = getUniqueResponse(numberTemplates, usedNumbers, true, number);
      } else {
        reply = getUniqueResponse(generalResponses, usedGenerals);
      }

      botDiv.textContent = reply;
      chat.scrollTop = chat.scrollHeight;
    }, 800);
  }

  document.getElementById("userInput").addEventListener("keypress", function(e) {
    if (e.key === "Enter") sendMessage();
  });
</script>

</body>
</html>
